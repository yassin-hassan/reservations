<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Artists List</title>
    <script>
        function showAgency(artistId, element) {
            fetch('/artists/' + artistId + '/agency')
                .then(response => response.text())
                .then(agencyName => {
                    const info = document.getElementById('agency-info-' + artistId);
                    info.textContent = 'Agency: ' + agencyName;
                    info.style.display = 'inline';
                });
        }

        function hideAgency(artistId) {
            const info = document.getElementById('agency-info-' + artistId);
            info.style.display = 'none';
        }
    </script>
</head>
<body>
<h1>Artists List</h1>

<table border="1">
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
    </tr>
    <tr th:each="artist : ${artists}">
        <td>
                <span th:text="${artist.firstname}"
                      th:attr="data-id=${artist.id}"
                      onmouseover="showAgency(this.getAttribute('data-id'), this)"
                      onmouseout="hideAgency(this.getAttribute('data-id'))"
                      style="cursor: pointer;">
                    First Name
                </span>
            <span th:id="'agency-info-' + ${artist.id}"
                  style="display:none; margin-left: 10px; color: blue;">
                </span>
        </td>
        <td th:text="${artist.lastname}">Last Name</td>
    </tr>
</table>

<br/>
<a href="/artists/new">Add New Artist</a> |
<a href="/agencies">View Agencies</a>
</body>
</html>